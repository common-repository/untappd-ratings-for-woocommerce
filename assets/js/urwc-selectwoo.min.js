jQuery((function(e){function n(n){if(!n.id||!n.text)return null;if(n.label&&n.name&&n.beer_count){const t=e("<img>").attr({src:n.label}),r=e("<div>").attr({class:"urwc-search-brewery-result__label"}).append(t),a=e("<div>").attr({class:"urwc-search-brewery-result__name"}).append(e("<span>").text(n.name)).append(e("<b>").text(" (ID#"+n.id+")")),c=e("<div>").attr({class:"urwc-search-brewery-result__beer_count"}).append(e("<span>").attr({class:"dashicons-before dashicons-beer"})).append(e("<span>").text(n.beer_count)),i=e("<div>").attr({class:"urwc-search-brewery-result__brewery_country"}).append(e("<span>").attr({class:"dashicons-before dashicons-flag"})).append(e("<span>").text(n.country_name)),s=e("<div>").attr({class:"urwc-search-brewery-result__brewery_page_url"}).append(e("<span>").attr({class:"dashicons-before dashicons-admin-links"}).html(e("<a>").attr({class:"urwc-search-brewery-link",href:"https://untappd.com"+n.brewery_page_url,rel:"noopener noreferer",target:"_blank"}).text(n.brewery_page_url))),o=e("<div>").attr({class:"urwc-search-brewery-result__stats"}).append(c).append(i).append(s),_=e("<div>").attr({class:"urwc-search-brewery-result__meta"}).append(a).append(o);return e("<div>").attr({class:"urwc-search-brewery-result-container clearfix"}).append(r).append(_)}return n.text}try{e(document.body).on("urwc-enhanced-select-init",(function(){let t=!1;function r(n,t,r,a){let c=e(a).find(".chart-tooltip");c.length||(c=e("<div>").attr({class:"chart-tooltip"}).css({top:t,left:n}).appendTo(a)),c.text(r).stop().fadeIn(200).fadeOut(2e3)}e.fn.select2.amd.require("select2/data/minimumInputLength").prototype.query=function(e,n,r){n.term=n.term||"",t||!(n.term.length<1||n.term.length<this.minimumInputLength)?t&&n.term.length<1?this.trigger("results:message",{message:"inputIntegerTooShort",args:{minimum:1,input:n.term,params:n}}):e.call(this,n,r):this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:n.term,params:n}})},e(":input.urwc-beer-search").filter(":not(.enhanced)").each((function(){t=!0;let n={allowClear:!!e(this).data("allowClear"),placeholder:e(this).data("placeholder"),minimumInputLength:e(this).data("minimumInputLength")?e(this).data("minimumInputLength"):"3",escapeMarkup:function(e){return e},ajax:{url:urwc_enhanced_select_params.ajax_url,dataType:"json",delay:250,data:function(n){return{term:n.term,action:e(this).data("action")||"urwc_beer_search",security:urwc_enhanced_select_params.search_beers_nonce,limit:e(this).data("limit")}},processResults:function(n){const t=[];return n.error?window.console.error(n.error):e.each(n.items,(function(e,n){t.push({id:e,text:n})})),{results:t}},cache:!0}};n=e.extend(n,{language:{errorLoading:function(){return wc_enhanced_select_params.i18n_searching},inputTooLong:function(e){const n=e.input.length-e.maximum;return 1===n?wc_enhanced_select_params.i18n_input_too_long_1:wc_enhanced_select_params.i18n_input_too_long_n.replace("%qty%",n)},inputTooShort:function(e){const n=e.minimum-e.input.length;return 1===n?wc_enhanced_select_params.i18n_input_too_short_1:wc_enhanced_select_params.i18n_input_too_short_n.replace("%qty%",n)},inputIntegerTooShort:function(e){const n=e.minimum-e.input.length;return 1===n?urwc_enhanced_select_params.i18n_input_integer_too_short_1:urwc_enhanced_select_params.i18n_input_integer_too_short_n.replace("%qty%",n)},loadingMore:function(){return wc_enhanced_select_params.i18n_load_more},maximumSelected:function(e){return 1===e.maximum?wc_enhanced_select_params.i18n_selection_too_long_1:wc_enhanced_select_params.i18n_selection_too_long_n.replace("%qty%",e.maximum)},noResults:function(){return wc_enhanced_select_params.i18n_no_matches},searching:function(){return wc_enhanced_select_params.i18n_searching}}}),e(this).selectWoo(n).addClass("enhanced")})),e(".urwc-beer-search").on("select2:select",(function(n){const t=n.params.data;if(t.id&&!isNaN(t.text)){const n=this,a=e.ajax({url:urwc_enhanced_select_params.ajax_url,dataType:"json",type:"GET",data:{action:"urwc_beer_info",security:urwc_enhanced_select_params.beer_info_nonce,beer_id:t.id}});a.done((function(a){a.error?(e(n).val(null).trigger("change"),r(0,0,a.error,e(n).parent("._urwc_beer_id_field"))):e(n).empty().append(new Option(a.beer_name,t.id,!0,!0)).trigger("change")})),a.fail((function(t,a){r(0,0,a,e(n).parent("._urwc_beer_id_field"))}))}})),e(":input.urwc-brewery-search").filter(":not(.enhanced)").each((function(){t=!1;let r={allowClear:!!e(this).data("allow_clear"),placeholder:e(this).data("placeholder"),minimumInputLength:e(this).data("minimum_input_length")?e(this).data("minimum_input_length"):"3",templateResult:n,escapeMarkup:function(e){return e},ajax:{url:urwc_enhanced_select_params.ajax_url,dataType:"json",delay:250,data:function(n){return{term:n.term,action:e(this).data("action")||"urwc_brewery_search",security:urwc_enhanced_select_params.brewery_search_nonce,limit:e(this).data("limit")}},processResults:function(n){const t=[];return n.items&&e.each(n.items,(function(e,n){t.push({id:e,text:n.text.split("&#039;").join("'"),label:n.brewery_label,name:n.brewery_name.split("&#039;").join("'"),beer_count:n.beer_count,country_name:n.country_name.split("&#039;").join("'"),brewery_page_url:n.brewery_page_url})})),{results:t}},cache:!0}};r=e.extend(r,{language:{errorLoading:function(){return wc_enhanced_select_params.i18n_searching},inputTooLong:function(e){const n=e.input.length-e.maximum;return 1===n?wc_enhanced_select_params.i18n_input_too_long_1:wc_enhanced_select_params.i18n_input_too_long_n.replace("%qty%",n)},inputTooShort:function(e){const n=e.minimum-e.input.length;return 1===n?wc_enhanced_select_params.i18n_input_too_short_1:wc_enhanced_select_params.i18n_input_too_short_n.replace("%qty%",n)},inputIntegerTooShort:function(e){const n=e.minimum-e.input.length;return 1===n?urwc_enhanced_select_params.i18n_input_integer_too_short_1:urwc_enhanced_select_params.i18n_input_integer_too_short_n.replace("%qty%",n)},loadingMore:function(){return wc_enhanced_select_params.i18n_load_more},maximumSelected:function(e){return 1===e.maximum?wc_enhanced_select_params.i18n_selection_too_long_1:wc_enhanced_select_params.i18n_selection_too_long_n.replace("%qty%",e.maximum)},noResults:function(){return wc_enhanced_select_params.i18n_no_matches},searching:function(){return wc_enhanced_select_params.i18n_searching}}}),e(this).selectWoo(r).addClass("enhanced")})),e(".urwc-brewery-search").on("select2:selecting",(function(e){e.preventDefault(),function(e){try{navigator.clipboard.writeText(e.data.id).then((()=>{r(10,12,urwc_enhanced_select_params.i18n_copied+" #"+e.data.id,e.originalEvent.delegateTarget.parentNode)}),(e=>{window.console.error(e)}))}catch(e){window.console.error(e)}}(e.params.args)}))})).trigger("urwc-enhanced-select-init"),e("html").on("click",(function(n){this===n.target&&e(":input.urwc-beer-search, :input.urwc-brewery-search").filter(".select2-hidden-accessible").selectWoo("close")}))}catch(e){window.console.log(e)}}));